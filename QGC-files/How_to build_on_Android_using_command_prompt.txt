# How to build apk for Android

### Requirement: 

- Qt Component: Android ARMv7
- Android version: Android 9 API Level 28
- Android SDK: armeabi-v7a 32bit/ 64bit arm64-v8a
- Android NDK: 21.3.6528147
- Java JDK: 11, 

### Environment Setup 

After install the requirement, make sure that we have corresponding path set. 

JAVA_HOME
C:\Users\thanh\Desktop\Working\Source\SDKS\JDK11
ANDROID_NDK_ROOT
C:\Users\thanh\Desktop\Working\Source\SDKS\Android\ndk\21.3.6528147
PATH
C:\Users\thanh\Desktop\Working\Source\SDKS\Android\ndk\21.3.6528147\toolchains\llvm\prebuilt\windows-x86_64\bin
C:\Qt\Tools\QtCreator\bin\jom
C:\Qt\5.15.2\android\bin

### Building using window Command Prompt. 

$C:/Qt/5.15.2/android/bin/qmake.exe C:\Users\thanh\Desktop\Working\Source\qgroundcontrol\qgroundcontrol.pro -spec android-clang "CONFIG+=debug" "CONFIG+=qml_debug" ANDROID_ABIS="arm64-v8a" && $ $C:/Users/thanh/Desktop/Working/Source/SDKS/Android/ndk/21.3.6528147/prebuilt/windows-x86_64/bin/make.exe qmake_all
$C:\Users\thanh\Desktop\Working\Source\SDKS\Android\ndk\21.3.6528147\prebuilt\windows-x86_64\bin\make.exe -j8

Edit build_android/android-QGroundControl-deployment-settings as below:  (+Change "sdk" path; change "android-min-sdk-version":; change "android-target-sdk-version": "28")
{
   "description": "This file is generated by qmake to be read by androiddeployqt and should not be modified by hand.",
   "qt": "C:/Qt/5.15.2/android",
   "sdk": "C:\\Users\\thanh\\Desktop\\Working\\Source\\SDKS\\Android",
   "sdkBuildToolsRevision": "",
   "ndk": "C:\\Users\\thanh\\Desktop\\Working\\Source\\SDKS\\Android\\ndk\\21.3.6528147",
   "toolchain-prefix": "llvm",
   "tool-prefix": "llvm",
   "ndk-host": "windows-x86_64",
   "architectures": {"arm64-v8a":"aarch64-linux-android"},
   "android-package-source-directory": "C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/android",
   "android-version-name": "APP_VERSION_STR",
   "android-version-code": "664208000",
   "android-min-sdk-version": "29",
   "android-target-sdk-version": "29",
   "android-extra-libs": "C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/libs/OpenSSL/android_openssl/arm64/libcrypto.so,C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/libs/OpenSSL/android_openssl/arm64/libssl.so",
   "qml-import-paths": "C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/src/QmlControls",
   "qml-root-path": "C:/Users/thanh/Desktop/Working/Source/qgroundcontrol",
   "stdcpp-path": "C:\\Users\\thanh\\Desktop\\Working\\Source\\SDKS\\Android\\ndk\\21.3.6528147/toolchains/llvm/prebuilt/windows-x86_64/sysroot/usr/lib/",
   "qrcFiles": "C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/qgroundcontrol.qrc,C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/qgcresources.qrc,C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/qgcimages.qrc,C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/resources/InstrumentValueIcons/InstrumentValueIcons.qrc,C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/UnitTest.qrc,C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/src/FirmwarePlugin/APM/APMResources.qrc,C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/src/FirmwarePlugin/PX4/PX4Resources.qrc,C:/Users/thanh/Desktop/Working/Source/qgroundcontrol/src/Airmap/dummy/airmap_dummy.qrc,C:/Users/thanh/Desktop/Working/Source/mqgroundcontrol/build_android/arm64-v8a/qmake_qmake_qm_files.qrc",
   "application-binary": "QGroundControl"
}

$C:\Users\thanh\Desktop\Working\Source\SDKS\Android\ndk\21.3.6528147\prebuilt\windows-x86_64\bin\make.exe apk
